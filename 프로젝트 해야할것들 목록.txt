<현재 구현한 부분>

로그인/로그아웃
회원가입
아이디찾기
비밀번호찾기
정보수정(현재 비밀번호만)


----------------------------------------------

<해야할 부분>

1. TOP MENU부분 메뉴 표시 수정
로그인/로그아웃/마이페이지 버튼 로그인여부에 따라 표시/제거하기
-해결-

2. 서포터 신청페이지 구현하기
DB테이블에 저장되게. 1:1 관계이므로 member 테이블과 합쳐도 될듯함.
-해결-
// member 테이블과 합친 버전과 나눈 버전 만듦
// SupporterBean을 생성했는데 오류가 나서 확인해보니 Validator가 문제였음

3. 문의하기 페이지 구현하기
제목과 내용을 입력하면 문의메일 테이블에 저장됨.
OR 메일 계정 하나를 더 파서 해당 메일로 관리자메일에 문의내용 전송.
아니면 그냥 문의하기 페이지를 삭제하고 게시판으로 대체하기.
-해결-

4. 게시판 페이지 구현하기
해당 카테고리 DB 테이블에서 목록 뽑아서 표시하고 (번호, 제목, 금액, 지역, 작성시간) // 해결
제목을 클릭하면 해당 게시물 내용 표시되게(이미지도). 
페이지네이션도 구현한다(한 페이지에 게시물은 10개정도)
배달 쇼핑 단순작업 역할대행

-자동매핑 설정 추가해야함- // 해결
-글쓰기는 구현 완료-
-주소 입력 api 합체 성공- // 현재 날짜 6월 1일

우선 게시물 조회 기능(read) 만들고 페이지네이션 구현하기.

-조회기능 완료-
-수정기능 완료-
-삭제기능 완료-
-페이지네이션 완료-


! <textarea> 태그는 개행해주지 말것. 여백생김.

5. 신청하기, 수정, 삭제, 신고 기능 구현.
우선 쉬운것부터(수정,삭제) 구현한다. 큰 문제는 없을듯.

-수정기능 완료-
-삭제기능 완료-
-신청기능 완료-
-신고기능 완료-

신청하기를 누르면 우측에 댓글 형식으로 게시물 작성자에게 메시지 보낼수 있게?
보낸 메시지는 DB 테이블에 저장되고 게시물 작성자의 마이페이지 or 자신의 글에서 확인 가능하게.
알림 기능 구현하면 좋고(ajax를 이용).

// 일단 ajax 이용해서 댓글 형식으로 화면에 표시되도록은 함 (6월 2일 화요일 오후 6시 20분)
// 댓글 작성후에 신청하기를 누르면 게시물에 댓글로 등록이 된다.
// 댓글 페이지네이션도 구현했는데 ajax를 써서 구현했으므로 페이지 리로드는 발생하지 않음.
// 본인 게시물일 경우 신청 목록을 다 확인 가능
// 서포터의 경우에는 자기가 신청하고 달린 댓글만 확인 가능하다.
// 댓글 작성후 신청하기를 누르면 해당 댓글이 있는 페이지로 이동된다.

신고하기를 누르면 신고 사유를 선택(라디오버튼)하고 내용을 쓰는 형식.
DB테이블 신고테이블에 저장한다. 
추후에 관리자가 따로 확인할 수 있고 제재를 가할 수 있으면 좋을 것 같음.
// 신고테이블 생성 완료. 라디오버튼 말고 prompt사용해서 신고내용 직접 입력받음. 

서포터) 신청 취소 기능 만들어야함(해당 댓글 번호 확인 후 board_comment 테이블에서 삭제되도록)
// 만듦 6월3일 오후 6시 30분

회원) 수락기능 만들어야함.

게시물 작성자가 수락하면? 거래 테이블로 이동. 		// 완료 - 거래 테이블에 서포터번호, 게시물번호를 저장시킴.
거래 테이블의 컬럼은 거래번호, 서포터번호, 게시물번호가 필요할듯. 
// 진행상황 컬럼도 필요할거같음 -> 진행상황은 board 테이블에 있으므로 조인해서 사용하기로함. 
거래 페이지를 하나 생성해서 의뢰 정보와 회원정보 or 서포터 정보를 서로 공개.
거래 페이지에서는 완료버튼, 취소버튼이 필요할듯.
회원이 완료를 누르면 거래가 성사된다(포인트가 이동됨) 
// board_trade테이블에 reward 컬럼 추가했음. 수락시 이 테이블로 포인트가 이동하고 완료를 누르면 서포터에게, 취소를 누르면
// 회원에게 다시 포인트가 입력될것임.
서포터가 취소를 눌러야 취소가 된다.

DB방식) 회원이 완료를 누르면 진행상황이 완료로 변하고 포인트가 서포터에게 이동된다.
서포터가 취소를 누르면 진행상황이 취소로 변하고 포인트가 회원에게 이동된다.

우선은 포인트 충전부터 구현?
// 포인트 충전은 구현완료

6. 포인트 시스템 구현.
여유가 있으면 결제시스템 사용해서 해당 계정에 포인트를 충전시킨다.
서포터가 글 조회후에 신청하기를 누른후 의뢰가 성공적으로 완수가 되면 
서포터에게 포인트가 전달된다.
구색만 갖추려면 따로 테이블 생성 없이 포인트를 증감, 
차감하는 방식으로 구현하면 될 것 같음.

// 아임포트 api 이용해서 결제시스템 구현, 결제가 완료되면 포인트가 증가됨.

1. 의뢰 수락시 포인트 차감되야함(서버에서 보관하다가 완료되면 서포터에게로, 취소하면 의뢰자에게) // 완료
2. 거래 페이지 만들어야함(의뢰 상세정보, 완료, 취소 버튼 출력되게)
3. 인터셉터 이용해서 페이지 비정상접근 막아야함(서포터가 아닌데 댓글을 달려고하거나, 서포터 페이지 접근하거나 등등)
4. 사용자 입력값 유효성 검사해야함


의뢰 수락 진행 순서))
1. board_trade에 삽입  // 완료
2. board 상태 수정      // 완료 
3. member 포인트 수정  // 완료

거래페이지 순서))
의뢰 정보 출력되고 의뢰가 정상적으로 끝나면? 
회원이 완료버튼을 누름 -> 포인트가 서포터에게 이체되고 진행상태 완료(2)로 변경됨.

그러려면 필요한 정보. 게시물번호랑 서포터번호가 필요.  // 완료

정상적으로 안끝났을 경우
서포터가 취소버튼을 누름 -> 포인트가 회원에게 이체되고 진행상태 취소(3)로 변경됨
// 일단 완료는 했는데 진행상태를 취소로 바꾸지말고 다시 대기로 바꾸면?? 아니면 회원에게 재등록 버튼을 제공.

필요한 정보. 위와 마찬가지로 게시물번호, 회원번호가 필요.
취소한다음에 board_trade에서 데이터 삭제해야함.

<2020 06 10 앞으로 해야할 것 정리>

거래페이지))
1. 주소를 바탕으로 상세 지도 출력시켜주기
2-1. 실시간 채팅 기능 구현하기
2-2. 코멘트 형식으로 실시간 메세지 송수신(ajax 이용해서)


// protocol : cmd , 댓글작성자, 게시글 작성자 , seq (reply , user2 , user1 , 12)

// protocol : cmd , 댓글작성자, 게시글 작성자, seq(글 번호)


다시 접속했을 때 알림이 있는지 확인해야함) // 해결함 

DB에서 메세지 서칭후에 존재하면 리스트로 셀렉트해옴.

셀렉트 해온 메세지들을 게시물 작성자에게 소켓통신으로 전송해줌.

문제발견)) 알림 성공한 메세지들은 지워줘야함 ( 안그러면 매번 접속시마다 알림 메세지가 중복으로 뜨기 때문) // 해결함

<2020/06/23>
<해야할 순서 정리 - 구현 쉬운 순으로>
1. 수락시에 서포터에게도 알림 메시지 전송하기 // 완료
2. 비밀번호 암호화, 비밀번호 찾기 기능 수정 // 완료
3. 서포터에게 중개 수수료 차감 후 지급하기 (글쓰기 폼 변경, 대리 구매의 경우 물건 가격도 지불하게) // 완료
4. alert 창 css 적용시키기 ( 이건 UI 만들 때 해도 될듯 )
5. 본인인증 구현하기 // 완료
6. 회원 테이블에 성별, 휴대폰번호 추가하기, 글쓰기에도 추가하기 (글쓰기에는 추가했음, 회원테이블엔 추가안함)
7. 의뢰 완료 / 취소 설계 변경 // 완료
8. 게시판 표시 방식 변경 
9. 의뢰 신청시 문자 보내기. 수락, 완료시에도 보내면 좋을듯.

<해결된것들>
1. 의뢰 완료 / 취소 설계 변경
2. 진행 상태에 따라서 해당 게시판으로 이동할지, 거래 게시판으로 이동할지 결정되게 수정
3. 의뢰 완료 / 취소시 알림 메세지 전송하고 저장되게 수정함
4. 인터셉터 수정, 로그인 권한없이 페이지 접근 못하는 리스트 업데이트. 
5. 비 로그인시 게시물 읽는 페이지에서 목록 버튼만 노출되도록 수정함, 댓글, 신청하기 버튼은 노출안됨
6. 포인트 차감 설계 변경. 글 작성시에 차감하고 의뢰 완료시, 글 삭제나 취소시에 롤백되도록 변경함.
7. 화면 상단 회원 포인트 부분 ajax로 변경. 페이지 변경시에 자동 로드됨.
8. read와 modify부분 전화번호 폼 추가, 전화번호 수정 안되는 부분 수정함. 
9. 회원이 작성한 글에 댓글이 달리면 문자로 알려주고 수락하면 서포터에게 문자로 알림이 간다.
10. 글 수정시에 보상 포인트를 변경시 현재 회원의 포인트와 대조 후에 가능하면 성공, 부족하면 실패하는 기능 추가.
더 적은 포인트로 수정하면 차액을 지급하고, 더 많은 포인트로 수정하면 차액만큼 회원의 포인트를 차감한다.

<수정사항>
글 작성후에 사용자 포인트 차감되고 갱신 안되고있음 수정해야함 // 완료
페이지 로드시에 회원 포인트 출력해줄수없는지 수정할 수 있음 하기. // 미해결
만약에 글 수정시에 보상을 바꾸면 그거 적용되게 처리하기. // 완료

<2020/06/26>
<해야할 것들 정리>
1. 지도 api
2. 거래 페이지에서 문의하기 버튼 만들고 연결하기
3. 글 검색 기능 추가
4. 글 분류 기능 추가

<해결된 것들>
1. 지도 api 추가했음. 입력된 주소의 지도를 사용자에게 표시해줌. 주소 정보 없을시 지도는 표시되지 않음.
2. 문의하기 버튼 만들고 리포트 기능과 연결했음
3. 검색 기능 추가했음.
4. 글 분류 기능 추가. 드롭다운 메뉴를 없애고 게시판 통합페이지에 카테고리 버튼을 만들었음.
5. 레이아웃 수정, 검색 기능 버그 수정함. 카테고리 넘버가 없을 경우 동적쿼리문을 이용해서 전체 게시물에서 
검색한 결과를 보여줌
